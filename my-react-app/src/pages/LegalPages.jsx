// src/pages/LegalPages.jsx — повна сторінка (оновлено, додано «Безпечна угода» та «Умови доставки та повернення»)
import React, { useEffect, useState } from "react";
import { Link, useLocation } from "react-router-dom";
import './LegalPages.css';


// ===== Налаштування/реквізити — відредагуйте під себе =====
const COMPANY_NAME = "Lite-Forest";
const LEGAL_ENTITY = "ТОВ «Лайт-Форест»"; // за наявності юрособи
const WEBSITE_URL = "https://lite-forest.example"; // домен сайту
const ADDRESS = "Україна, м. Київ, вул. Прикладна, 1";
const CONTACT_EMAIL = "support@lite-forest.example";
const CONTACT_PHONE = "+380 00 000 00 00";
const LAST_UPDATED = "06 вересня 2025";

// Сервіси, з якими ви інтегровані (заповніть реальні):
const THIRD_PARTIES = {
  payments: ["LiqPay", "Stripe"],
  shipping: ["Нова Пошта"],
  analytics: ["Google Analytics"],
  marketing: ["Meta Pixel (Facebook)", "Telegram Widgets"],
  hosting: ["Vercel/AWS/інші"],
};

// Таби (додано «Безпечна угода» та «Умови доставки та повернення»)
const SECTIONS = [
  { id: "safe-deal", label: "Безпечна угода" },
  { id: "shipping-returns", label: "Умови доставки та повернення" }, // ⬅️ додано
  { id: "privacy", label: "Політика конфіденційності" },
  { id: "terms", label: "Угода користувача" },
  { id: "cookies", label: "Cookies" },
];

export default function LegalPages() {
  const { hash } = useLocation();
  const [active, setActive] = useState(SECTIONS[0].id);

  useEffect(() => {
    const targetId = hash?.slice(1) || SECTIONS[0].id;
    setActive(targetId);
    const el = document.getElementById(targetId);
    if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
  }, [hash]);

  useEffect(() => {
    const onScroll = () => {
      let current = active;
      for (const s of SECTIONS) {
        const el = document.getElementById(s.id);
        if (!el) continue;
        const rect = el.getBoundingClientRect();
        if (rect.top <= 120 && rect.bottom >= 120) { current = s.id; break; }
      }
      if (current !== active) setActive(current);
    };
    window.addEventListener("scroll", onScroll);
    return () => window.removeEventListener("scroll", onScroll);
  }, [active]);

  return (
    <main className="legal max-w-5xl mx-auto px-4 py-8">
      <header className="legal__header mb-6">
        <h1 className="text-3xl font-semibold mb-2">Юридична інформація</h1>
        <p className="text-sm opacity-80">Останнє оновлення: {LAST_UPDATED}</p>

        <nav className="legal__tabs flex flex-wrap gap-2 mt-4" aria-label="Швидка навігація по розділах">
          {SECTIONS.map((s) => (
            <Link
              key={s.id}
              to={`/legal#${s.id}`}
              className={`legal__tab inline-flex items-center rounded-full border px-3 py-1 text-sm no-underline ${
                active === s.id ? "bg-yellow-100 border-yellow-300 font-medium" : "border-neutral-200"
              }`}
              aria-current={active === s.id ? "page" : undefined}
            >
              {s.label}
            </Link>
          ))}
        </nav>
      </header>

      {/* ===== Безпечна угода ===== */}
      <section
        id="safe-deal"
        className="legal__section prose prose-neutral"
        style={{ scrollMarginTop: 96 }}
        aria-labelledby="safe-deal-title"
      >
        <h2 id="safe-deal-title">Безпечна угода</h2>
        <p>
          Під «безпечна угода» ми маємо на увазі прозорі та захищені умови покупки на {WEBSITE_URL} у {COMPANY_NAME}
          {LEGIS(LEGAL_ENTITY)}. Ми співпрацюємо з надійними платіжними провайдерами ({joinOrDash(THIRD_PARTIES.payments)}) та
          службами доставки ({joinOrDash(THIRD_PARTIES.shipping)}), дотримуємося вимог щодо захисту персональних даних і надаємо
          зрозумілий порядок повернень.
        </p>

        <h3>Як це працює</h3>
        <ul>
          <li>
            <strong>Оплата</strong>: транзакції обробляються через {joinOrDash(THIRD_PARTIES.payments)}. Ми не зберігаємо повні
            реквізити банківських карток.
          </li>
          <li>
            <strong>Підтвердження замовлення</strong>: після оформлення ви отримуєте підтвердження на email/в акаунті.
          </li>
          <li>
            <strong>Доставка</strong>: виконується через {joinOrDash(THIRD_PARTIES.shipping)}. Строки й тарифи відображаються під
            час оформлення.
          </li>
          <li>
            <strong>Повернення</strong>: умови та строки описані на сторінці <Link to="/returns">/returns</Link>. Ми діємо згідно з
            чинним законодавством України.
          </li>
        </ul>

        <h3>Гарантії та безпека</h3>
        <ul>
          <li>З’єднання із сайтом захищається сучасними протоколами шифрування.</li>
          <li>
            Персональні дані обробляються відповідно до <Link to="/legal#privacy">Політики конфіденційності</Link>.
          </li>
          <li>
            Умови користування сервісом регулює <Link to="/legal#terms">Угода користувача</Link>.
          </li>
        </ul>

        <h3>Контакти</h3>
        <ul>
          <li>Адреса: {ADDRESS}</li>
          <li>
            Email: {CONTACT_EMAIL}
            {CONTACT_PHONE ? `, Телефон: ${CONTACT_PHONE}` : ""}
          </li>
        </ul>

        <p className="text-sm opacity-80">
          Примітка: окремі деталі проведення платежів (блокування/списання коштів, 3-D Secure, повернення) регулюються політиками
          відповідного платіжного провайдера.
        </p>
      </section>

      {/* ===== Умови доставки та повернення ===== */}
      <section
        id="shipping-returns"
        className="legal__section prose prose-neutral"
        style={{ scrollMarginTop: 96 }}
        aria-labelledby="shipping-returns-title"
      >
        <h2 id="shipping-returns-title">Умови доставки та повернення</h2>
        <p>
          Цей розділ описує, як ми доставляємо замовлення на {WEBSITE_URL} і як працює повернення/обмін товарів. Доставку
          здійснюють партнери {joinOrDash(THIRD_PARTIES.shipping)}. Актуальні варіанти, строки та тарифи відображаються під час
          оформлення замовлення.
        </p>

        <h3>Варіанти доставки</h3>
        <ul>
          <li>До відділення/поштомату {joinOrDash(THIRD_PARTIES.shipping)}.</li>
          <li>Кур’єрська доставка за адресою.</li>
          <li>Самовивіз (за наявності; уточнюйте адресу і час видачі у підтримки).</li>
        </ul>

        <h3>Вартість і строки</h3>
        <ul>
          <li>Вартість доставки розраховується при оформленні замовлення з урахуванням габаритів, ваги та регіону.</li>
          <li>Строки залежать від оператора доставки та обраного способу. Орієнтовні строки і тариф завжди видно в кошику.</li>
          <li>Акції щодо безкоштовної доставки (за певної суми/категорій) повідомляються окремо на сайті.</li>
        </ul>

        <h3>Відстеження і отримання</h3>
        <ul>
          <li>Після відправлення ви отримуєте трек-номер або посилання на відстеження від {joinOrDash(THIRD_PARTIES.shipping)}.</li>
          <li>Під час отримання перевірте цілісність упаковки та комплектність. У разі пошкодження складіть акт із перевізником.</li>
          <li>Ризик випадкової втрати/пошкодження переходить до вас у момент прийняття відправлення.</li>
        </ul>

        <h3>Невдала/прострочена доставка</h3>
        <ul>
          <li>Якщо посилку не забрано в строк з відділення, оператор може повернути її відправнику.</li>
          <li>Повторне відправлення можливе за погодженням. Фактичні витрати на повторну доставку можуть бути утримані.</li>
        </ul>

        <h3>Повернення товару належної якості</h3>
        <ul>
          <li>
            Ви можете повернути товар протягом 14 календарних днів із дати отримання, відповідно до законодавства України про захист
            прав споживачів.
          </li>
          <li>Товар має бути без слідів використання, у повній комплектації та з збереженою фабричною упаковкою/пломбами.</li>
          <li>Витрати на зворотну доставку при поверненні товару належної якості несе покупець.</li>
        </ul>

        <h3>Повернення/обмін у разі дефекту</h3>
        <ul>
          <li>Якщо ви виявили недоліки, зверніться до підтримки — ми організуємо заміну/ремонт/повернення коштів.</li>
          <li>Витрати на зворотну доставку у разі підтвердженого дефекту або нашої помилки покриває {COMPANY_NAME}.</li>
        </ul>

        <h3>Порядок оформлення повернення</h3>
        <ol>
          <li>Напишіть нам: {CONTACT_EMAIL}{CONTACT_PHONE ? ` або телефонуйте: ${CONTACT_PHONE}` : ""}.</li>
          <li>
            Заповніть коротку форму на <Link to="/returns">/returns</Link> (за наявності), вкажіть номер замовлення, причину та фото
            (за потреби).
          </li>
          <li>Упакуйте товар належним чином і відправте через {joinOrDash(THIRD_PARTIES.shipping)} з трек-номером.</li>
          <li>Зберігайте квитанцію/накладну до завершення процесу.</li>
        </ol>

        <h3>Повернення коштів</h3>
        <ul>
          <li>Кошти повертаються тим самим способом, яким здійснювалась оплата (за винятком окремих сервісів/обмежень провайдера).</li>
          <li>Строк зарахування залежить від банку/платіжної системи; зазвичай протягом кількох банківських днів після прийняття повернення на складі.</li>
        </ul>

        <h3>Обмеження та винятки</h3>
        <p className="text-sm">
          Непродовольчі товари індивідуального виготовлення/замовлення, розпаковані витратні матеріали, товари особистої гігієни
          тощо можуть не підлягати поверненню, якщо це передбачено законом. Конкретний перелік — у політиці на сторінці{" "}
          <Link to="/returns">/returns</Link>.
        </p>

        <h3>Підтримка</h3>
        <ul>
          <li>Адреса для листування/рекламацій: {ADDRESS}</li>
          <li>
            Email: {CONTACT_EMAIL}
            {CONTACT_PHONE ? `, Телефон: ${CONTACT_PHONE}` : ""}
          </li>
        </ul>

        <p className="text-sm opacity-80">
          Деталі можуть відрізнятися залежно від категорії товару та політик перевізника. Завжди перевіряйте інформацію при
          оформленні замовлення та на сторінці <Link to="/returns">/returns</Link>.
        </p>
      </section>

      {/* ===== Політика конфіденційності ===== */}
      <section id="privacy" className="legal__section prose prose-neutral" style={{ scrollMarginTop: 96 }} aria-labelledby="privacy-title">
        <h2 id="privacy-title">Політика конфіденційності</h2>
        <p>
          Ця Політика пояснює, як {COMPANY_NAME}
          {LEGIS(LEGAL_ENTITY)} (далі — «ми», «нас», «наш») збирає, використовує, зберігає та захищає персональні дані користувачів
          під час відвідування сайту {WEBSITE_URL} та користування нашими сервісами. Ми діємо відповідно до чинного законодавства
          України щодо захисту персональних даних та загальновизнаних принципів конфіденційності.
        </p>

        <h3>1. Володілець даних і контакти</h3>
        <ul>
          <li>Назва: {COMPANY_NAME}{LEGAL_ENTITY ? ` (${LEGAL_ENTITY})` : ""}</li>
          <li>Адреса: {ADDRESS}</li>
          <li>
            Email: {CONTACT_EMAIL}
            {CONTACT_PHONE ? `, Телефон: ${CONTACT_PHONE}` : ""}
          </li>
        </ul>

        <h3>2. Які дані ми обробляємо</h3>
        <ul>
          <li><strong>Облікові дані</strong>: ім’я, прізвище, email, телефон, пароль (зберігається у вигляді хеша).</li>
          <li><strong>Дані замовлень</strong>: кошик, склад замовлення, ціна, статуси, повернення, рекламації.</li>
          <li>
            <strong>Платіжні дані</strong>: токени/ідентифікатори платежів (обробка здійснюється платіжними провайдерами: {joinOrDash(THIRD_PARTIES.payments)}).
            Ми не зберігаємо повні реквізити карток.
          </li>
          <li>
            <strong>Дані доставки</strong>: ПІБ одержувача, адреса/відділення, контакти (через служби доставки: {joinOrDash(THIRD_PARTIES.shipping)}).
          </li>
          <li><strong>Комунікації</strong>: звернення до підтримки, відгуки, участь в опитуваннях, підписка на розсилку.</li>
          <li>
            <strong>Технічні дані</strong>: IP-адреса, файли cookie, ідентифікатори пристрою/браузера, лог-файли, події взаємодії
            (аналітика: {joinOrDash(THIRD_PARTIES.analytics)}).
          </li>
        </ul>

        <h3>3. Цілі та правові підстави</h3>
        <ul>
          <li><strong>Надання сервісу та виконання договору</strong> — оформлення замовлень, доставка, підтримка.</li>
          <li><strong>Згода</strong> — на розсилки, маркетингові cookie, окремі інтеграції.</li>
          <li><strong>Легітимний інтерес</strong> — розвиток функціоналу, аналітика використання сайту, запобігання шахрайству.</li>
          <li><strong>Юридичний обов’язок</strong> — податковий/бухгалтерський облік, відповіді на законні запити органів.</li>
        </ul>

        <h3>4. Передача даних третім сторонам</h3>
        <p>Ми ділимося даними лише в межах необхідного з постачальниками, які допомагають нам працювати:</p>
        <ul>
          <li>Платіжні провайдери: {joinOrDash(THIRD_PARTIES.payments)}.</li>
          <li>Служби доставки: {joinOrDash(THIRD_PARTIES.shipping)}.</li>
          <li>
            Аналітичні/маркетингові платформи: {joinOrDash(THIRD_PARTIES.analytics.concat(THIRD_PARTIES.marketing || []))}.
          </li>
          <li>Хостинг та інфраструктура: {joinOrDash(THIRD_PARTIES.hosting)}.</li>
        </ul>
        <p>З відповідними постачальниками укладаються угоди/умови обробки даних (де це застосовно). Ми не продаємо персональні дані.</p>

        <h3>5. Міжнародні передачі</h3>
        <p>Якщо дані передаються за межі України/ЄЕЗ, ми забезпечуємо належні гарантії захисту відповідно до загальноприйнятих стандартів.</p>

        <h3>6. Строки зберігання</h3>
        <p>Персональні дані зберігаються не довше, ніж це необхідно для цілей обробки та виконання вимог законодавства (зокрема обліку).</p>

        <h3>7. Ваші права</h3>
        <p>
          Ви маєте права: доступу, виправлення, видалення, обмеження обробки, заперечення, переносимості даних, а також право
          відкликати згоду. Щоб реалізувати права, звертайтесь: {CONTACT_EMAIL}. Також ви можете звернутися зі скаргою до
          уповноважених органів.
        </p>

        <h3>8. Cookies</h3>
        <p>
          Ми використовуємо файли cookie та подібні технології. Детальніше — у <Link to="/legal#cookies">Політиці щодо файлів cookie</Link>.
        </p>

        <h3>9. Безпека</h3>
        <p>Ми впроваджуємо технічні та організаційні заходи для захисту даних. Водночас жодна система не гарантує абсолютної безпеки.</p>

        <h3>10. Зміни цієї Політики</h3>
        <p>Ми можемо оновлювати Політику. Актуальна версія публікується на цій сторінці із зазначенням дати оновлення.</p>
      </section>

      {/* ===== Угода користувача ===== */}
      <section id="terms" className="legal__section prose prose-neutral" style={{ scrollMarginTop: 96 }} aria-labelledby="terms-title">
        <h2 id="terms-title">Угода користувача</h2>
        <p>
          Ця Угода регулює умови доступу та використання сайту {WEBSITE_URL} і сервісів {COMPANY_NAME}. Користуючись сайтом, ви
          підтверджуєте, що прочитали та приймаєте цю Угоду і пов’язані політики.
        </p>

        <h3>1. Визначення</h3>
        <ul>
          <li><strong>Користувач</strong> — особа, що відвідує сайт та/або здійснює покупку.</li>
          <li><strong>Товари</strong> — продукція/послуги, що пропонуються до продажу на сайті.</li>
          <li><strong>Акаунт</strong> — обліковий запис Користувача (за наявності реєстрації).</li>
        </ul>

        <h3>2. Прийняття умов</h3>
        <p>
          Використання сайту означає згоду з Угодою, <Link to="/legal#privacy">Політикою конфіденційності</Link> та{" "}
          <Link to="/legal#cookies">Політикою щодо файлів cookie</Link>. Якщо ви не згодні — припиніть користування сайтом.
        </p>

        <h3>3. Реєстрація й безпека</h3>
        <ul>
          <li>Надавайте правдиві та актуальні дані під час створення акаунта і оформлення замовлення.</li>
          <li>Ви відповідаєте за збереження пароля та всі дії у вашому акаунті.</li>
          <li>Використання сайту особами молодше 18 років — лише за згодою законних представників.</li>
        </ul>

        <h3>4. Ціни, замовлення, оплата</h3>
        <ul>
          <li>Ціни вказуються на сайті в відповідній валюті та можуть змінюватися до підтвердження замовлення.</li>
          <li>
            Оплата здійснюється через платіжні сервіси: {joinOrDash(THIRD_PARTIES.payments)}. Безпека платежів забезпечується їхніми
            політиками.
          </li>
          <li>Після оформлення ви отримуєте підтвердження замовлення на email/в акаунт.</li>
          <li>Ми можемо відхилити/скасувати замовлення у випадку помилок ціноутворення, відсутності товару чи порушення цієї Угоди.</li>
        </ul>

        <h3>5. Доставка та передання ризиків</h3>
        <ul>
          <li>
            Доставка здійснюється службами: {joinOrDash(THIRD_PARTIES.shipping)}. Строки та тарифи — згідно з інформацією під час
            оформлення.
          </li>
          <li>Ризик випадкової втрати/пошкодження переходить до Користувача в момент отримання товару.</li>
        </ul>

        <h3>6. Повернення та гарантії</h3>
        <p>
          Умови повернення/обміну та гарантійного обслуговування визначені на сторінці <Link to="/returns">/returns</Link> та
          застосовному законодавстві.
        </p>

        <h3>7. Дозволені та заборонені дії</h3>
        <ul>
          <li>Дотримуйтеся законодавства і поважайте інших користувачів.</li>
          <li>
            Заборонені: спроби несанкціонованого доступу, втручання у роботу сайту, шахрайство, публікація незаконного/образливого
            контенту, порушення прав ІВ.
          </li>
        </ul>

        <h3>8. Контент і права інтелектуальної власності</h3>
        <ul>
          <li>
            Контент сайту (дизайн, тексти, зображення, логотипи, код) належить {COMPANY_NAME} або використовується на законних
            підставах.
          </li>
          <li>Ви отримуєте обмежену невиключну ліцензію користування сайтом для особистих некомерційних цілей.</li>
          <li>
            Розміщуючи відгуки/матеріали, ви надаєте нам невиключну ліцензію на їх публікацію та використання з посиланням на вас (за
            потреби).
          </li>
        </ul>

        <h3>9. Відмова від гарантій і обмеження відповідальності</h3>
        <ul>
          <li>Сайт надається «як є». Ми прагнемо точності, але не гарантуємо безпомилковості чи безперервної доступності.</li>
          <li>
            Відповідальність {COMPANY_NAME} обмежується межами, дозволеними законодавством, і не включає непрямі збитки, втрату
            прибутку тощо.
          </li>
        </ul>

        <h3>10. Посилання третіх сторін</h3>
        <p>Сайт може містити посилання/віджети третіх осіб (напр., соцмережі). Ми не контролюємо їх контент та політики.</p>

        <h3>11. Форс-мажор</h3>
        <p>Ми не несемо відповідальності за невиконання зобов’язань у результаті обставин непереборної сили.</p>

        <h3>12. Зміни Угоди</h3>
        <p>Ми можемо оновлювати цю Угоду. Нова редакція набирає чинності з моменту публікації на цій сторінці або з вказаної дати.</p>

        <h3>13. Застосовуване право та вирішення спорів</h3>
        <p>
          Застосовується право України. Спори вирішуються шляхом переговорів, а у разі недосягнення згоди — у судовому порядку.
        </p>

        <h3>14. Контакти</h3>
        <ul>
          <li>Адреса: {ADDRESS}</li>
          <li>
            Email: {CONTACT_EMAIL}
            {CONTACT_PHONE ? `, Телефон: ${CONTACT_PHONE}` : ""}
          </li>
        </ul>
      </section>

      {/* ===== Політика щодо файлів cookie ===== */}
      <section id="cookies" className="legal__section prose prose-neutral" style={{ scrollMarginTop: 96 }} aria-labelledby="cookies-title">
        <h2 id="cookies-title">Політика щодо файлів cookie</h2>
        <p>Ця Політика пояснює, які cookie та подібні технології ми використовуємо на {WEBSITE_URL}, з якою метою і як ви можете керувати налаштуваннями.</p>

        <h3>1. Що таке cookie</h3>
        <p>Cookie — це невеликі текстові файли, що зберігаються у браузері та допомагають сайту працювати стабільно й зручно.</p>

        <h3>2. Категорії cookie</h3>
        <ul>
          <li><strong>Строго необхідні</strong> — забезпечують базові функції (сесія, кошик, оформлення замовлення).</li>
          <li><strong>Функціональні</strong> — запам’ятовують ваші налаштування (мова, регіон, вподобання).</li>
          <li>
            <strong>Аналітичні</strong> — допомагають розуміти використання сайту й покращувати його (напр., {joinOrDash(THIRD_PARTIES.analytics)}).
          </li>
          <li>
            <strong>Маркетингові</strong> — показ персоналізованої реклами та вимірювання її ефективності (напр., {joinOrDash(THIRD_PARTIES.marketing)}).
          </li>
        </ul>

        <h3>3. Приклади cookie</h3>
        <div className="overflow-x-auto not-prose">
          <table className="w-full text-sm border">
            <thead>
              <tr className="bg-gray-50">
                <th className="p-2 border">Назва</th>
                <th className="p-2 border">Провайдер</th>
                <th className="p-2 border">Призначення</th>
                <th className="p-2 border">Строк дії</th>
                <th className="p-2 border">Тип</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td className="p-2 border">liteforest_session</td>
                <td className="p-2 border">{COMPANY_NAME}</td>
                <td className="p-2 border">Сесія користувача (автентифікація, кошик, оформлення).</td>
                <td className="p-2 border">Сесійний</td>
                <td className="p-2 border">Строго необхідний</td>
              </tr>
              <tr>
                <td className="p-2 border">_ga, _gid</td>
                <td className="p-2 border">Google Analytics</td>
                <td className="p-2 border">Аналітика відвідуваності та подій.</td>
                <td className="p-2 border">2 роки / 24 год</td>
                <td className="p-2 border">Аналітичні</td>
              </tr>
              <tr>
                <td className="p-2 border">_fbp</td>
                <td className="p-2 border">Meta (Facebook)</td>
                <td className="p-2 border">Оптимізація рекламних кампаній.</td>
                <td className="p-2 border">3 місяці</td>
                <td className="p-2 border">Маркетингові</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p className="text-sm opacity-80">Список — приклад. Вкажіть лише ті cookie, які фактично використовує сайт.</p>

        <h3>4. Керування згодою</h3>
        <ul>
          <li>Під час першого візиту ми можемо показувати банер згоди на cookie. Ви можете прийняти всі або налаштувати категорії.</li>
          <li>Змінити вибір можна у будь-який час через посилання «Налаштувати cookie» у футері/налаштуваннях акаунта.</li>
          <li>Також можна видалити/заблокувати cookie у налаштуваннях браузера (це може вплинути на роботу сайту).</li>
        </ul>

        <h3>5. Сторонні cookie</h3>
        <p>
          Cookie, що встановлюються третіми сторонами (
          {joinOrDash((THIRD_PARTIES.analytics || []).concat(THIRD_PARTIES.marketing || []))}), регулюються політиками відповідних
          провайдерів.
        </p>

        <h3>6. Оновлення цієї Політики</h3>
        <p>Ми можемо періодично оновлювати цю Політику cookie. Перевіряйте дату оновлення вище.</p>

        <h3>7. Контакти</h3>
        <ul>
          <li>Адреса: {ADDRESS}</li>
          <li>
            Email: {CONTACT_EMAIL}
            {CONTACT_PHONE ? `, Телефон: ${CONTACT_PHONE}` : ""}
          </li>
        </ul>
      </section>
    </main>
  );
}

// Допоміжні функції для красивого тексту
function joinOrDash(arr) {
  if (!arr || !arr.length) return "—";
  return arr.join(", ");
}
function LEGIS(entity) { return entity ? `, що діє як володілець даних (${entity})` : ""; }
