# –ò–º—è –≤–∞—à–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
name: Deploy React App to GitHub Pages

on:
  push:
    branches:
      - main

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: true

jobs:
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    runs-on: ubuntu-latest

    # üî• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 1: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    # –¢–µ–ø–µ—Ä—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã 'run' –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ 'my-react-app'
    defaults:
      run:
        working-directory: ./my-react-app

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'
          # üî• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 2: –ü—É—Ç—å –∫ lock-—Ñ–∞–π–ª—É —Ç–µ–ø–µ—Ä—å —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è
          cache-dependency-path: my-react-app/package-lock.json

      # –¢–µ–ø–µ—Ä—å –Ω–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å 'working-directory'
      - name: Install dependencies
        run: npm ci # –ò—Å–ø–æ–ª—å–∑—É–µ–º 'ci' –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∏ –Ω–∞–¥–µ–∂–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

      # –ò –∑–¥–µ—Å—å —Ç–æ–∂–µ –Ω–µ –Ω—É–∂–Ω–æ
      - name: Build
        run: npm run build

      - name: Setup Pages
        uses: actions/configure-pages@v5

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # –í–∞–∂–Ω–æ: –ø—É—Ç—å –∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç –∫–æ—Ä–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
          # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è 'dist'. –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Create React App, –æ–Ω–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è 'build'.
          path: './my-react-app/build' # –∏–ª–∏ './my-react-app/dist'

      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4